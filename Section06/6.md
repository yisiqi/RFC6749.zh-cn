# 6 刷新访问令牌

若授权服务器给客户端颁发了刷新令牌，客户端通过使用按[附录B](../AppendixB/b.md)`application/x-www-form-urlencoded`格式在HTTP请求实体正文中发送下列UTF-8字符编码的参数向令牌端点发起刷新请求：

-  **grant_type**    
  必需的。值必须设置为`refresh_token`。

-  **refresh_token**    
  必需的。颁发给客户端的刷新令牌。

-  **scope**    
  可选的。如[3.3](../Section03/3.3.md)节所述的访问请求的范围。请求的范围不能包含任何不是由资源所有者原始许可的范围，若省略，被视为与资源所有者原始许可的范围相同。

因为刷新令牌通常是用于请求额外的访问令牌的持久凭证，刷新令牌绑定到被它被颁发给的客户端。如果客户端类型是机密的或客户端被颁发了客户端凭据（或选定的其他身份验证要求），客户端必须如[3.2.1](../Section03/3.2.1.md)节所述与授权服务器进行身份验证。

例如，客户端使用传输层安全发起如下HTTP请求（额外的换行仅用于显示目的）：

```HTTP
POST /token HTTP/1.1
Host: server.example.com
Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&refresh_token=tGzv3JOkF0XG5Qx2TlKWIA
```

授权服务器必须：

- 要求机密客户端或任何被颁发了客户端凭据（或有其他身份验证要求）的客户端进行客户端身份验证，
- 若包括了客户端身份验证，验证客户端身份并确保刷新令牌是被颁发给进行身份验证的客户端的，并
- 验证刷新令牌。

如果有效且被授权，授权服务器如[5.1](../Section05/5.1.md)节所述颁发访问令牌。如果请求因验证失败或无效，授权服务器[5.2](../Section05/5.2.md)节所述返回错误响应。

授权服务器可以颁发新的刷新令牌，在这种情况下，客户端必须放弃旧的刷新令牌，替换为新的刷新令牌。在向客户端颁发新的刷新令牌后授权服务器可以撤销旧的刷新令牌。若颁发了新的刷新令牌，刷新令牌的范围必须与客户端包含在请求中的刷新令牌的范围相同。
